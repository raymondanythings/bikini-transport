openapi: 3.0.0
info:
  title: Bikini Transport API
  description: |
    ë¹„í‚¤ë‹ˆì‹œí‹° í•´ì € ë²„ìŠ¤ ì˜ˆì•½ ì‹œìŠ¤í…œ API

    ìŠ¤í°ì§€ë°¥ í…Œë§ˆì˜ ë²„ìŠ¤ ì˜ˆì•½ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ RESTful APIì…ë‹ˆë‹¤.
  version: 1.0.0
  contact:
    name: Bikini Transport Team

servers:
  - url: http://localhost:5173/api
    description: Development server (with MSW)
  - url: /api
    description: Relative path for production

tags:
  - name: stations
    description: ì—­(ì •ë¥˜ì¥) ê´€ë ¨ API
  - name: lines
    description: ë…¸ì„  ê´€ë ¨ API
  - name: itineraries
    description: ê²½ë¡œ ê²€ìƒ‰ ë° ì¶”ì²œ API
  - name: seats
    description: ì¢Œì„ ì¡°íšŒ API
  - name: coupons
    description: ì¿ í° ê´€ë ¨ API
  - name: bookings
    description: ì˜ˆì•½ ê´€ë ¨ API

paths:
  /stations:
    get:
      tags: [stations]
      summary: ì „ì²´ ì—­ ëª©ë¡ ì¡°íšŒ ë° ê²€ìƒ‰
      description: |
        ë¹„í‚¤ë‹ˆì‹œí‹°ì˜ ëª¨ë“  ë²„ìŠ¤ ì •ë¥˜ì¥ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

        **ê²€ìƒ‰ ê¸°ëŠ¥:**
        - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° `q`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë¥˜ì¥ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ ê°€ëŠ¥
        - ë¶€ë¶„ ì¼ì¹˜ ê²€ìƒ‰ ì§€ì› (ëŒ€ì†Œë¬¸ì ë¬´ì‹œ)
        - `q` íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ ì „ì²´ ëª©ë¡ ë°˜í™˜
      operationId: getStations
      parameters:
        - name: q
          in: query
          required: false
          schema:
            type: string
          description: ê²€ìƒ‰ì–´ (ì •ë¥˜ì¥ ì´ë¦„ ë¶€ë¶„ ì¼ì¹˜)
          example: ë¹„í‚¤ë‹ˆ
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                required:
                  - stations
                properties:
                  stations:
                    type: array
                    items:
                      $ref: '#/components/schemas/Station'

  /lines:
    get:
      tags: [lines]
      summary: ì „ì²´ ë…¸ì„  ëª©ë¡ ì¡°íšŒ
      description: ì‹œí‹°ì„ , ì™¸ê³½ì„ , íˆ¬ì–´ì„  ë“± ëª¨ë“  ë…¸ì„  ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
      operationId: getLines
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                required:
                  - lines
                properties:
                  lines:
                    type: array
                    items:
                      $ref: '#/components/schemas/Line'

  /itineraries/search:
    post:
      tags: [itineraries]
      summary: ê²½ë¡œ ê²€ìƒ‰
      description: |
        ì¶œë°œì§€, ë„ì°©ì§€, ì¶œë°œ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ìµœì ì˜ ê²½ë¡œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
        ìµœë‹¨ì‹œê°„, ìµœì†Œí™˜ìŠ¹, ìµœì €ìš”ê¸ˆ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì²œ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

        **í™˜ìŠ¹ í• ì¸ ì •ì±…:**
        - í™˜ìŠ¹ ì‹œ ê°ˆì•„íƒ€ëŠ” ë…¸ì„ ì˜ ìš”ê¸ˆì—ë§Œ í• ì¸ ì ìš©
        - 1íšŒ í™˜ìŠ¹: ë…¸ì„ ë³„ ì„¤ì •ëœ í• ì¸ìœ¨
        - 2íšŒ ì´ìƒ í™˜ìŠ¹: ë…¸ì„ ë³„ ì„¤ì •ëœ í• ì¸ìœ¨
      operationId: searchItineraries
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - fromStationId
                - toStationId
                - departureTime
              properties:
                fromStationId:
                  type: string
                  description: ì¶œë°œì—­ ID
                  example: bikini-city
                toStationId:
                  type: string
                  description: ë„ì°©ì—­ ID
                  example: bubble-city
                departureTime:
                  type: string
                  format: date-time
                  description: ì¶œë°œ ì‹œê°„ (ISO 8601)
                  example: '2025-01-15T09:00:00Z'
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                required:
                  - itineraries
                properties:
                  itineraries:
                    type: array
                    description: ì¶”ì²œ ê²½ë¡œ ëª©ë¡ (ìµœëŒ€ 3ê°œ, ê²½ë¡œê°€ ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´)
                    items:
                      $ref: '#/components/schemas/Itinerary'

  /itineraries/{itineraryId}/calculate-fare:
    post:
      tags: [itineraries]
      summary: ìš”ê¸ˆ ê³„ì‚° (ê²°ì œ ì „ ë¯¸ë¦¬ë³´ê¸°)
      description: |
        ì„ íƒí•œ ê²½ë¡œì— ëŒ€í•´ ì¿ í°ì„ ì ìš©í•œ ìµœì¢… ìš”ê¸ˆì„ ê³„ì‚°í•©ë‹ˆë‹¤.

        **ê³„ì‚° ìˆœì„œ:**
        1. ê° êµ¬ê°„ì˜ ê¸°ë³¸ ìš”ê¸ˆ ê³„ì‚°
        2. í™˜ìŠ¹ í• ì¸ ì ìš© (í™˜ìŠ¹ëœ êµ¬ê°„ë§Œ)
        3. ì¿ í° í• ì¸ ì ìš©
           - PEARL_PASS: ì²« íƒ‘ìŠ¹ ë…¸ì„  ê¸°ë³¸ìš”ê¸ˆì—ì„œ 2â‚´ ì°¨ê°
           - GARY_NIGHT/TOUR_FUN: ê° êµ¬ê°„ì—ì„œ í™˜ìŠ¹í• ì¸ê³¼ ë¹„êµí•˜ì—¬ í° ê°’ ì ìš©

        **ì£¼ì˜ì‚¬í•­:**
        - ê°™ì€ ë…¸ì„ ì„ ê³„ì† íƒ€ë©´ í™˜ìŠ¹ìœ¼ë¡œ ê³„ì‚°ë˜ì§€ ì•ŠìŒ
        - ì¿ í°ì€ 1ê°œë§Œ ì ìš© ê°€ëŠ¥
      operationId: calculateFare
      parameters:
        - name: itineraryId
          in: path
          required: true
          schema:
            type: string
          example: itinerary-1
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                couponCode:
                  type: string
                  nullable: true
                  description: ì ìš©í•  ì¿ í° ì½”ë“œ (ì„ íƒ)
                  enum:
                    - PEARL_PASS
                    - GARY_NIGHT
                    - TOUR_FUN
                  example: PEARL_PASS
      responses:
        '200':
          description: ìš”ê¸ˆ ê³„ì‚° ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                required:
                  - itinerary
                  - pricing
                properties:
                  itinerary:
                    $ref: '#/components/schemas/Itinerary'
                    description: ì¿ í°ì´ ì ìš©ëœ ê²½ë¡œ ì •ë³´ (ê° êµ¬ê°„ë³„ í• ì¸ ê¸ˆì•¡ í¬í•¨)
                  pricing:
                    type: object
                    required:
                      - subtotal
                      - transferDiscount
                      - couponDiscount
                      - totalDiscount
                      - finalTotal
                    properties:
                      subtotal:
                        type: number
                        description: í• ì¸ ì „ ì´ì•¡ (ëª¨ë“  êµ¬ê°„ baseFare í•©ê³„)
                        example: 17.0
                      transferDiscount:
                        type: number
                        description: í™˜ìŠ¹ í• ì¸ ì´ì•¡
                        example: 1.05
                      couponDiscount:
                        type: number
                        description: ì¿ í° í• ì¸ ì´ì•¡
                        example: 2.0
                      totalDiscount:
                        type: number
                        description: ì´ í• ì¸ ê¸ˆì•¡ (í™˜ìŠ¹ + ì¿ í°)
                        example: 3.05
                      finalTotal:
                        type: number
                        description: ìµœì¢… ê²°ì œ ê¸ˆì•¡
                        example: 13.95
                  appliedCoupon:
                    allOf:
                      - $ref: '#/components/schemas/UserCoupon'
                      - nullable: true
                    description: ì ìš©ëœ ì¿ í° ì •ë³´ (ì—†ìœ¼ë©´ null)
        '404':
          description: ê²½ë¡œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­ (ì¿ í° ì¡°ê±´ ë¶ˆì¼ì¹˜ ë“±)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /legs/{legId}/seats:
    get:
      tags: [seats]
      summary: êµ¬ê°„ë³„ ì¢Œì„ ì¡°íšŒ
      description: íŠ¹ì • êµ¬ê°„ì˜ ì¢Œì„ ë°°ì¹˜ ë° ì˜ˆì•½ ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getSeatsByLeg
      parameters:
        - name: legId
          in: path
          required: true
          schema:
            type: string
          example: leg-city-line-1
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeatLayout'
        '404':
          description: êµ¬ê°„ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /coupons/random-popup:
    get:
      tags: [coupons]
      summary: ëœë¤ ì¿ í° íŒì—… ì¡°íšŒ
      description: |
        í™•ë¥  ê¸°ë°˜ìœ¼ë¡œ ëœë¤ ì¿ í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
        ì¿ í°ì´ ì¶œí˜„í•˜ì§€ ì•Šìœ¼ë©´ nullì„ ë°˜í™˜í•©ë‹ˆë‹¤.

        **ì¶œí˜„ ì¡°ê±´:**
        - ì•½ 10% í™•ë¥ ë¡œ ì¿ í° ì¶œí˜„
        - 1ì´ˆë§ˆë‹¤ ë¦¬íŒ¨ì¹˜ ê¶Œì¥
      operationId: getRandomCouponPopup
      responses:
        '200':
          description: ì„±ê³µ (ì¿ í°ì´ ìˆê±°ë‚˜ ì—†ìŒ)
          content:
            application/json:
              schema:
                type: object
                properties:
                  coupon:
                    allOf:
                      - $ref: '#/components/schemas/CouponDefinition'
                      - nullable: true
                example:
                  coupon:
                    couponCode: PEARL_PASS
                    name: ì§„ì£¼íŒ¨ìŠ¤
                    description: ëª¨ë“  ë…¸ì„  ê¸°ë³¸ìš”ê¸ˆ 2â‚´ í• ì¸
                    emoji: ğŸ¦ª
                    discountType: FIXED_AMOUNT
                    discountValue: 2.0
                    maxOwnedCount: 3

  /coupons/claim:
    post:
      tags: [coupons]
      summary: ì¿ í° ë°›ê¸°
      description: |
        ëœë¤ ì¿ í°ì„ íšë“í•©ë‹ˆë‹¤.
        ìµœëŒ€ ì†Œì§€ ê°œìˆ˜ë¥¼ ì´ˆê³¼í•˜ë©´ ì—ëŸ¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
      operationId: claimCoupon
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - couponCode
              properties:
                couponCode:
                  type: string
                  enum:
                    - PEARL_PASS
                    - GARY_NIGHT
                    - TOUR_FUN
                  example: PEARL_PASS
      responses:
        '200':
          description: ì¿ í° ë°›ê¸° ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - coupon
                properties:
                  success:
                    type: boolean
                    example: true
                  coupon:
                    $ref: '#/components/schemas/UserCoupon'
        '400':
          description: ìµœëŒ€ ì†Œì§€ ê°œìˆ˜ ì´ˆê³¼ ë˜ëŠ” ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: MAX_COUPON_EXCEEDED
                message: ì´ë¯¸ ìµœëŒ€ ê°œìˆ˜ë¥¼ ë³´ìœ  ì¤‘ì…ë‹ˆë‹¤

  /coupons/my:
    get:
      tags: [coupons]
      summary: ë‚´ ë³´ìœ  ì¿ í° ëª©ë¡ ì¡°íšŒ
      description: í˜„ì¬ ì‚¬ìš©ìê°€ ë³´ìœ í•œ ëª¨ë“  ì¿ í° ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
      operationId: getMyCoupons
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                required:
                  - coupons
                properties:
                  coupons:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserCoupon'

  /bookings:
    post:
      tags: [bookings]
      summary: ì˜ˆì•½ ìƒì„±
      description: |
        ê²½ë¡œ, ì¢Œì„, ì¿ í° ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì˜ˆì•½ì„ ìƒì„±í•©ë‹ˆë‹¤.

        **í• ì¸ ê³„ì‚° ìˆœì„œ:**
        1. ê° êµ¬ê°„ì˜ ê¸°ë³¸ ìš”ê¸ˆ ê³„ì‚° (baseFareë§Œ ì‚¬ìš©)
        2. í™˜ìŠ¹ í• ì¸ ì ìš© (ê°ˆì•„íƒ€ëŠ” ë…¸ì„ ì—ë§Œ)
        3. ì¿ í° í• ì¸ ì ìš©
           - PEARL_PASS: ì²« íƒ‘ìŠ¹ ë…¸ì„  ê¸°ë³¸ìš”ê¸ˆì—ì„œ 2â‚´ ì°¨ê°
           - GARY_NIGHT/TOUR_FUN: í™˜ìŠ¹í• ì¸ê³¼ ë¹„êµí•˜ì—¬ í° ê°’ ì ìš©

        **ì£¼ì˜ì‚¬í•­:**
        - ê°™ì€ ë…¸ì„ ì„ ê³„ì† íƒ€ë©´ í™˜ìŠ¹ìœ¼ë¡œ ê³„ì‚°ë˜ì§€ ì•ŠìŒ
        - ì¿ í°ì€ 1ê°œë§Œ ì ìš© ê°€ëŠ¥
        - ì¢Œì„ì´ ì´ë¯¸ ì˜ˆì•½ëœ ê²½ìš° ì—ëŸ¬ ë°˜í™˜
      operationId: createBooking
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - itineraryId
                - seatSelections
                - departureTime
              properties:
                itineraryId:
                  type: string
                  description: ì„ íƒí•œ ê²½ë¡œ ID
                  example: itinerary-1
                seatSelections:
                  type: array
                  description: êµ¬ê°„ë³„ ì„ íƒí•œ ì¢Œì„
                  items:
                    type: object
                    required:
                      - legId
                      - seatNumber
                    properties:
                      legId:
                        type: string
                        example: leg-city-line-1
                      seatNumber:
                        type: string
                        example: A1
                couponCode:
                  type: string
                  enum:
                    - PEARL_PASS
                    - GARY_NIGHT
                    - TOUR_FUN
                  nullable: true
                  description: ì ìš©í•  ì¿ í° ì½”ë“œ (ì„ íƒ)
                  example: PEARL_PASS
                departureTime:
                  type: string
                  format: date-time
                  description: ì¶œë°œ ì‹œê°„ (ISO 8601)
                  example: '2025-01-15T09:00:00Z'
      responses:
        '201':
          description: ì˜ˆì•½ ìƒì„± ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­ (ì¢Œì„ ì¤‘ë³µ, ì¿ í° ì˜¤ë¥˜ ë“±)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    get:
      tags: [bookings]
      summary: ë‚´ ì˜ˆì•½ ëª©ë¡ ì¡°íšŒ
      description: |
        í˜„ì¬ ì‚¬ìš©ìì˜ ëª¨ë“  ì˜ˆì•½ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

        **ì •ë ¬ ì˜µì…˜:**
        - date_desc: ì¶œë°œ ë‚ ì§œ ë‚´ë¦¼ì°¨ìˆœ (ê¸°ë³¸)
        - date_asc: ì¶œë°œ ë‚ ì§œ ì˜¤ë¦„ì°¨ìˆœ
        - price_desc: ê¸ˆì•¡ ë†’ì€ ìˆœ
        - price_asc: ê¸ˆì•¡ ë‚®ì€ ìˆœ
      operationId: getMyBookings
      parameters:
        - name: sort
          in: query
          schema:
            type: string
            enum:
              - date_desc
              - date_asc
              - price_desc
              - price_asc
            default: date_desc
        - name: status
          in: query
          schema:
            type: string
            enum:
              - CONFIRMED
              - CANCELLED
          description: ì˜ˆì•½ ìƒíƒœ í•„í„°
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                required:
                  - bookings
                properties:
                  bookings:
                    type: array
                    items:
                      $ref: '#/components/schemas/Booking'

  /bookings/{bookingId}:
    get:
      tags: [bookings]
      summary: ì˜ˆì•½ ìƒì„¸ ì¡°íšŒ
      operationId: getBookingById
      parameters:
        - name: bookingId
          in: path
          required: true
          schema:
            type: string
          example: booking-123
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Booking'
        '404':
          description: ì˜ˆì•½ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

components:
  schemas:
    Station:
      type: object
      required:
        - stationId
        - name
      properties:
        stationId:
          type: string
          description: ì—­ ê³ ìœ  ID
          example: bikini-city
        name:
          type: string
          description: ì—­ ì´ë¦„
          example: ë¹„í‚¤ë‹ˆì‹œí‹°

    Line:
      type: object
      required:
        - lineId
        - name
        - type
        - color
        - stationIds
        - baseFare
        - extraFarePerStop
        - transferDiscount1st
        - transferDiscount2nd
        - schedule
      properties:
        lineId:
          type: string
          description: ë…¸ì„  ê³ ìœ  ID
          example: city-line
        name:
          type: string
          description: ë…¸ì„  ì´ë¦„
          example: ì‹œí‹°ì„ 
        type:
          type: string
          enum:
            - CITY
            - SUBURBAN
            - TOUR
          description: ë…¸ì„  íƒ€ì…
          example: CITY
        color:
          type: string
          description: ë…¸ì„  ìƒ‰ìƒ (Hex)
          example: '#FFC107'
        stationIds:
          type: array
          description: ë…¸ì„ ì´ ê²½ìœ í•˜ëŠ” ì—­ ID ëª©ë¡ (ìˆœì„œëŒ€ë¡œ)
          items:
            type: string
          example:
            - new-kelp-city
            - glove-world
            - jellyfish-fields
            - bikini-city
        baseFare:
          type: number
          description: ê¸°ë³¸ ìš”ê¸ˆ (â‚´)
          example: 10.0
        extraFarePerStop:
          type: number
          description: ì •ê±°ì¥ë‹¹ ì¶”ê°€ ìš”ê¸ˆ (â‚´)
          example: 2.0
        transferDiscount1st:
          type: number
          description: 1íšŒ í™˜ìŠ¹ í• ì¸ìœ¨ (0-1)
          example: 0.1
        transferDiscount2nd:
          type: number
          description: 2íšŒ ì´ìƒ í™˜ìŠ¹ í• ì¸ìœ¨ (0-1)
          example: 0.2
        schedule:
          type: object
          required:
            - firstDeparture
            - lastDeparture
            - intervalMinutes
          properties:
            firstDeparture:
              type: string
              description: ì²«ì°¨ ì‹œê°„ (HH:mm)
              example: '06:30'
            lastDeparture:
              type: string
              description: ë§‰ì°¨ ì‹œê°„ (HH:mm)
              example: '23:30'
            intervalMinutes:
              type: integer
              description: ë°°ì°¨ ê°„ê²© (ë¶„)
              example: 15

    Leg:
      type: object
      required:
        - legId
        - lineId
        - lineName
        - lineColor
        - fromStation
        - toStation
        - fromStationIndex
        - toStationIndex
        - durationMinutes
        - stopsCount
        - baseFare
        - transferNumber
        - transferDiscount
        - couponDiscount
        - finalFare
      properties:
        legId:
          type: string
          description: êµ¬ê°„ ê³ ìœ  ID
          example: leg-city-line-1
        lineId:
          type: string
          description: ì´ êµ¬ê°„ì´ ì†í•œ ë…¸ì„  ID
          example: city-line
        lineName:
          type: string
          description: ë…¸ì„  ì´ë¦„
          example: ì‹œí‹°ì„ 
        lineColor:
          type: string
          description: ë…¸ì„  ìƒ‰ìƒ
          example: '#FFC107'
        fromStation:
          $ref: '#/components/schemas/Station'
        toStation:
          $ref: '#/components/schemas/Station'
        fromStationIndex:
          type: integer
          description: ë…¸ì„  ë‚´ ì¶œë°œì—­ ì¸ë±ìŠ¤
          example: 0
        toStationIndex:
          type: integer
          description: ë…¸ì„  ë‚´ ë„ì°©ì—­ ì¸ë±ìŠ¤
          example: 3
        durationMinutes:
          type: integer
          description: ì†Œìš” ì‹œê°„ (ë¶„)
          example: 25
        stopsCount:
          type: integer
          description: ì •ê±°ì¥ ìˆ˜ (ì¶œë°œì—­ í¬í•¨)
          example: 4
        baseFare:
          type: number
          description: ê¸°ë³¸ ìš”ê¸ˆ (â‚´)
          example: 5.0
        transferNumber:
          type: integer
          description: í™˜ìŠ¹ ìˆœì„œ (0=í™˜ìŠ¹ ì—†ìŒ/ì²« íƒ‘ìŠ¹, 1=1íšŒ í™˜ìŠ¹, 2=2íšŒ ì´ìƒ í™˜ìŠ¹)
          example: 0
        transferDiscount:
          type: number
          description: ì´ êµ¬ê°„ì— ì ìš©ëœ í™˜ìŠ¹ í• ì¸ ê¸ˆì•¡ (â‚´)
          example: 0
        couponDiscount:
          type: number
          description: ì´ êµ¬ê°„ì— ì ìš©ëœ ì¿ í° í• ì¸ ê¸ˆì•¡ (â‚´)
          example: 0
        finalFare:
          type: number
          description: ì´ êµ¬ê°„ì˜ ìµœì¢… ìš”ê¸ˆ (baseFare - transferDiscount - couponDiscount)
          example: 5.0

    Itinerary:
      type: object
      required:
        - itineraryId
        - recommendationTypes
        - totalDurationMinutes
        - transferCount
        - legs
        - pricing
      properties:
        itineraryId:
          type: string
          description: ê²½ë¡œ ê³ ìœ  ID
          example: itinerary-1
        recommendationTypes:
          type: array
          description: ì¶”ì²œ íƒ€ì… (í•˜ë‚˜ì˜ ê²½ë¡œê°€ ì—¬ëŸ¬ íƒ€ì…ì¼ ìˆ˜ ìˆìŒ)
          items:
            type: string
            enum:
              - SHORTEST_TIME
              - MIN_TRANSFER
              - LOWEST_FARE
          example:
            - SHORTEST_TIME
            - MIN_TRANSFER
        totalDurationMinutes:
          type: integer
          description: ì´ ì†Œìš” ì‹œê°„ (ë¶„)
          example: 45
        transferCount:
          type: integer
          description: í™˜ìŠ¹ íšŸìˆ˜
          example: 1
        legs:
          type: array
          description: êµ¬ê°„ ëª©ë¡
          items:
            $ref: '#/components/schemas/Leg'
        pricing:
          type: object
          required:
            - subtotal
            - transferDiscount
            - totalBeforeCoupon
          properties:
            subtotal:
              type: number
              description: í• ì¸ ì „ ì´ì•¡ (ëª¨ë“  êµ¬ê°„ baseFare í•©ê³„)
              example: 17.0
            transferDiscount:
              type: number
              description: í™˜ìŠ¹ í• ì¸ ì´ì•¡
              example: 1.05
            totalBeforeCoupon:
              type: number
              description: ì¿ í° ì ìš© ì „ ê¸ˆì•¡ (í™˜ìŠ¹ í• ì¸ í›„)
              example: 15.95

    Seat:
      type: object
      required:
        - seatNumber
        - row
        - column
        - position
        - isAvailable
        - isReserved
      properties:
        seatNumber:
          type: string
          description: ì¢Œì„ ë²ˆí˜¸ (1A~6D)
          example: 2C
        row:
          type: integer
          description: í–‰ ë²ˆí˜¸ (0ë¶€í„° ì‹œì‘, 0~5)
          example: 1
        column:
          type: integer
          description: ì—´ ë²ˆí˜¸ (0=A, 1=B, 2=C, 3=D)
          example: 2
        position:
          type: string
          enum:
            - WINDOW
            - AISLE
          description: |
            ì¢Œì„ ìœ„ì¹˜
            - WINDOW: Aì—´(ì™¼ìª½ ì°½), Dì—´(ì˜¤ë¥¸ìª½ ì°½)
            - AISLE: Bì—´, Cì—´
          example: AISLE
        isAvailable:
          type: boolean
          description: ì„ íƒ ê°€ëŠ¥ ì—¬ë¶€
          example: true
        isReserved:
          type: boolean
          description: ì˜ˆì•½ëœ ì¢Œì„ ì—¬ë¶€
          example: false

    SeatLayout:
      type: object
      required:
        - legId
        - rows
        - columns
        - seats
      properties:
        legId:
          type: string
          description: êµ¬ê°„ ID
          example: leg-city-line-1
        rows:
          type: integer
          description: ì´ í–‰ ìˆ˜ (ê³ ì •ê°’ 6)
          example: 6
        columns:
          type: integer
          description: ì´ ì—´ ìˆ˜ (ê³ ì •ê°’ 4)
          example: 4
        seats:
          type: array
          description: |
            ì „ì²´ ì¢Œì„ ëª©ë¡ (1A~6D, ì´ 24ê°œ)

            ì¢Œì„ ë°°ì¹˜:
            1A  1B  [í†µë¡œ]  1C  1D
            2A  2B  [í†µë¡œ]  2C  2D
            3A  3B  [í†µë¡œ]  3C  3D
            4A  4B  [í†µë¡œ]  4C  4D
            5A  5B  [í†µë¡œ]  5C  5D
            6A  6B  [í†µë¡œ]  6C  6D
          items:
            $ref: '#/components/schemas/Seat'

    CouponDefinition:
      type: object
      description: ì¿ í° ê¸°ë³¸ ì •ë³´ (ì‚¬ìš©ì ë…ë¦½ì )
      required:
        - couponCode
        - name
        - description
        - emoji
        - discountType
        - discountValue
        - maxOwnedCount
      properties:
        couponCode:
          type: string
          enum:
            - PEARL_PASS
            - GARY_NIGHT
            - TOUR_FUN
          description: ì¿ í° ì½”ë“œ
          example: PEARL_PASS
        name:
          type: string
          description: ì¿ í° ì´ë¦„
          example: ì§„ì£¼íŒ¨ìŠ¤
        description:
          type: string
          description: ì¿ í° ì„¤ëª…
          example: ëª¨ë“  ë…¸ì„  ê¸°ë³¸ìš”ê¸ˆ 2â‚´ í• ì¸
        emoji:
          type: string
          description: ì¿ í° ì´ëª¨ì§€
          example: ğŸ¦ª
        discountType:
          type: string
          enum:
            - FIXED_AMOUNT
            - PERCENTAGE
          description: |
            í• ì¸ íƒ€ì…
            - FIXED_AMOUNT: ê³ ì • ê¸ˆì•¡ í• ì¸ (PEARL_PASS)
            - PERCENTAGE: ë¹„ìœ¨ í• ì¸ (GARY_NIGHT, TOUR_FUN)
          example: FIXED_AMOUNT
        discountValue:
          type: number
          description: |
            í• ì¸ ê°’
            - PEARL_PASS: 2.0 (â‚´)
            - GARY_NIGHT: 0.4 (40%)
            - TOUR_FUN: 0.3 (30%)
          example: 2.0
        maxOwnedCount:
          type: integer
          description: ìµœëŒ€ ì†Œì§€ ê°€ëŠ¥ ê°œìˆ˜
          example: 3
        applicableLineTypes:
          type: array
          description: ì ìš© ê°€ëŠ¥í•œ ë…¸ì„  íƒ€ì… (ì—†ìœ¼ë©´ ì „ì²´)
          items:
            type: string
            enum:
              - CITY
              - SUBURBAN
              - TOUR
          nullable: true
          example: [TOUR]
        timeCondition:
          type: object
          description: ì‹œê°„ ì¡°ê±´ (ì—†ìœ¼ë©´ ì œí•œ ì—†ìŒ)
          nullable: true
          properties:
            afterHour:
              type: integer
              description: ì´ ì‹œê°„ ì´í›„ë¶€í„° ì ìš© (24ì‹œê°„ ê¸°ì¤€)
              example: 21

    UserCoupon:
      type: object
      description: ì‚¬ìš©ìê°€ ë³´ìœ í•œ ì¿ í° ì •ë³´
      allOf:
        - $ref: '#/components/schemas/CouponDefinition'
        - type: object
          required:
            - ownedCount
          properties:
            ownedCount:
              type: integer
              description: í˜„ì¬ ì‚¬ìš©ìê°€ ë³´ìœ í•œ ê°œìˆ˜
              example: 1

    Booking:
      type: object
      required:
        - bookingId
        - bookingNumber
        - itinerary
        - seatSelections
        - departureTime
        - pricing
        - status
        - createdAt
      properties:
        bookingId:
          type: string
          description: ì˜ˆì•½ ê³ ìœ  ID
          example: booking-123
        bookingNumber:
          type: string
          description: ì˜ˆì•½ ë²ˆí˜¸ (ì‚¬ìš©ììš©)
          example: BKN-20250115-1234
        itinerary:
          $ref: '#/components/schemas/Itinerary'
        seatSelections:
          type: array
          description: êµ¬ê°„ë³„ ì„ íƒí•œ ì¢Œì„
          items:
            type: object
            required:
              - legId
              - legIndex
              - seatNumber
            properties:
              legId:
                type: string
                example: leg-city-line-1
              legIndex:
                type: integer
                description: êµ¬ê°„ ìˆœì„œ (0ë¶€í„° ì‹œì‘)
                example: 0
              seatNumber:
                type: string
                example: A1
        appliedCoupon:
          allOf:
            - $ref: '#/components/schemas/UserCoupon'
            - nullable: true
          description: ì ìš©ëœ ì¿ í° (ì—†ìœ¼ë©´ null)
        departureTime:
          type: string
          format: date-time
          description: ì¶œë°œ ì‹œê°„ (ISO 8601)
          example: '2025-01-15T09:00:00Z'
        pricing:
          type: object
          required:
            - subtotal
            - transferDiscount
            - couponDiscount
            - totalDiscount
            - finalTotal
            - currency
          properties:
            subtotal:
              type: number
              description: í• ì¸ ì „ ì´ì•¡ (ëª¨ë“  êµ¬ê°„ baseFare í•©ê³„)
              example: 17.0
            transferDiscount:
              type: number
              description: í™˜ìŠ¹ í• ì¸ ê¸ˆì•¡
              example: 1.05
            couponDiscount:
              type: number
              description: ì¿ í° í• ì¸ ê¸ˆì•¡
              example: 2.0
            totalDiscount:
              type: number
              description: ì´ í• ì¸ ê¸ˆì•¡ (í™˜ìŠ¹ + ì¿ í°)
              example: 3.05
            finalTotal:
              type: number
              description: ìµœì¢… ê²°ì œ ê¸ˆì•¡
              example: 13.95
            currency:
              type: string
              enum:
                - SHELL
              description: í™”í ë‹¨ìœ„
              example: SHELL
        status:
          type: string
          enum:
            - CONFIRMED
            - CANCELLED
          description: ì˜ˆì•½ ìƒíƒœ
          example: CONFIRMED
        createdAt:
          type: string
          format: date-time
          description: ì˜ˆì•½ ìƒì„± ì‹œê°„
          example: '2025-01-15T08:30:00Z'

    Error:
      type: object
      required:
        - error
        - message
      properties:
        error:
          type: string
          description: ì—ëŸ¬ ì½”ë“œ
          example: SEAT_ALREADY_RESERVED
        message:
          type: string
          description: ì—ëŸ¬ ë©”ì‹œì§€
          example: ì´ë¯¸ ì˜ˆì•½ëœ ì¢Œì„ì…ë‹ˆë‹¤
        details:
          type: object
          description: ì¶”ê°€ ì—ëŸ¬ ì •ë³´
          additionalProperties: true
          nullable: true
